<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrderBean - 커피 주문</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1 class="brand-name">OrderBean</h1>
            <nav class="header-nav">
                <button id="view-cart-btn" class="btn-header">주문하기</button>
                <span id="auth-buttons">
                    <a href="/login" class="btn-header" id="login-btn">로그인</a>
                    <a href="/register" class="btn-header" id="register-btn">회원가입</a>
                </span>
                <span id="user-info" style="display: none;">
                    <span id="user-email" style="margin-right: 1rem; color: #333;"></span>
                    <button id="logout-btn" class="btn-header">로그아웃</button>
                </span>
                <a href="/admin" class="btn-header">관리자</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="menu-section">
            <div id="menu-list" class="menu-grid">
                <!-- 메뉴가 동적으로 로드됩니다 -->
            </div>
        </section>
    </main>

    <!-- 장바구니 섹션 (하단 고정) -->
    <div id="cart-section" class="cart-container">
        <div class="cart-content">
            <h2 class="cart-title">장바구니</h2>
            <div id="cart-items" class="cart-items">
                <p class="cart-empty">장바구니가 비어있습니다.</p>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span class="total-label">총 금액</span>
                    <span id="total-amount" class="total-price">0원</span>
                </div>
                <button id="submit-order" class="btn-order">주문하기</button>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/menu.js"></script>
    <script src="/js/order.js"></script>
    <script>
        // 로그인 상태에 따라 헤더 업데이트
        function updateAuthUI() {
            const user = getUser();
            const authButtons = document.getElementById('auth-buttons');
            const userInfo = document.getElementById('user-info');
            const userEmail = document.getElementById('user-email');
            
            if (user) {
                authButtons.style.display = 'none';
                userInfo.style.display = 'inline-flex';
                userInfo.style.alignItems = 'center';
                userEmail.textContent = user.email;
            } else {
                authButtons.style.display = 'inline-flex';
                userInfo.style.display = 'none';
            }
        }
        
        // 로그아웃 버튼 이벤트
        document.getElementById('logout-btn')?.addEventListener('click', (e) => {
            e.preventDefault();
            logout();
        });
        
        // 페이지 로드 시 실행
        updateAuthUI();
    </script>
</body>
</html>

